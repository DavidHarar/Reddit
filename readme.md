# Detecting Anti-Israeli and Anti-Semitic Comments on Reddit

Reddit is the home for thousands of forums (`subreddits`) on various subjects that vary from mainstream to niche. It's slogan is "Dive into anything", and a as hinted, discussions on Reddit tend to be, relatively deeper than discussion on other social media networks. Another important feature of Reddit is the participants' anonimity. Each participant (`Redditor`) chooses their username at signup. This feature also lead to the more freedom when if comes to expressing extream and sometimes socialy unexeptable views.  
On multiple occations Reddit and it's CEO were critisized for the extant of hatered spread in some of the communities untouched or regulated, leading to a toxic echo chamber. One obvious victim of such dinamic is the jewish/Israeli community, that experienced a surge in anti-semitic comments following the October 7th events in Israel.  

In general, classification of comments on Reddit was challenging, as some of them aren't trivial. Table 1 present some titles and comments. Both in `/r/worldnews` and `/r/news` the title of the submission is the title of the article that is being refered to. It has no additional content. Therefore, comments were done by refering to the title or to the refered news article.  

| Title | Comment |
| ----- | ------- |
| Israeli forces arrest Al-Shifa Hospital director | What if this is true AND itâ€™s also monstrous to bomb a hospital? |
| X's ad revenue to be donated to Israeli hospitals, Red Cross in Gaza: Musk | DESPERATION is thy name. |
| Israeli cabinet approves deal for return of 50 hostages in exchange for multi-day ceasefire | LETS FUCKIN GOOOO |
| Houthis say they'll continue attacks until 'demise of Israel' | I will file that under the FAFO category! ðŸ˜¬ |
| Houthis say they'll continue attacks until 'demise of Israel' | A perfect example of idiocracy. |
| Yemen's Houthis release footage of takeover of Israeli-linked cargo ship | GD rebel scum....flew right by the heli pad.....so rude |

# Some Detected Comments
| Subreddit | Title | Comment |
| --------- | ----- | ------- |
| worldnews | Israeli Hostagesâ€™ Family Members Are Being Threatened By Suspicious Texts|Clownishly evil. I can't wait for the day when all the people supporting this behavior are forced to come to terms with the practices they've defended. |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|Beating civilian hostages with power cables is legitimate resistance. /s /far too many fucktards |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|Classical anticolonial hostage torture... /s |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|HAMAS EAT ðŸ·ðŸ’© |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|Obviously this is not true, Thai are part of the Western colonialism and Zionism! Liars! |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|What did Israel expect would happen when they try and colonise a country? Eventually they are gonna fight back |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|as horrible as it is, Palestinians are treated horribly in Israeli prisons as well. Violence begets violence |
| worldnews | Released Thai hostage says Israelis held with him were beaten with electric cables|Good to see they got the talking points deliver by mossad |
| worldnews | Four Palestinians, including two children, killed by Israeli forces in West Bank|Anti israeli user confirmed. |
| worldnews | Hamas armed wing says youngest hostage, relatives killed in previous Israeli air strike|More psychological warfare from Hamas, fucking scum. |
| worldnews | Released Palestinian terrorist refuses to leave Israeli jail|Getting some, they will torture me to death if I go back a collaborator vibes. |
| worldnews | Saudi Arabia has intercepted Houthi missiles aimed at Israel, Der Spiegel reports|Seriously itâ€™s time to bomb these guys. Enough is enough. |
| worldnews | Saudi Arabia has intercepted Houthi missiles aimed at Israel, Der Spiegel reports|WWIII has the potential to begin soon. |
| worldnews | Israeli intelligence leak details extent of warnings over Hamas attack | The Guardian|Bibi is about to go Bye-bye |
| worldnews | Erdogan tells UN chief Israel must be tried in international courts for Gaza crimes|I donâ€™t think fighting the Jewish State in a court of law is gonna go the way this guy thinks it will. |
| worldnews | Erdogan tells UN chief Israel must be tried in international courts for Gaza crimes|Yeah... Israel should stand trial for what it is doing in Gaza, No question about it. I don't care what they believe they are entitled to*they are NOT allowed to kill and displace 2million + people from their homes and likely cause Many thousands of peoples death in doing so In excess of them BOMBING their god damn houses, hospitals and businesses.** |
| worldnews | Israeli troops in northern Gaza targeted with bombs, in apparent breach of truce|What a shock! Baby mutilators arenâ€™t honest!! |
| worldnews | Israeli troops in northern Gaza targeted with bombs, in apparent breach of truce|Yeah, I seriously doubt a group of terrorists is going to honour any agreement they make. They're going to use it as an opportunity to... continue being terrorists. |
| worldnews | Israeli troops in northern Gaza targeted with bombs, in apparent breach of truce|The terrorists aren't honouring a cease fire, and aren't returning families? The terrorists are liars and doing terrorist shit? No fucking way. |
| worldnews | Israeli troops in northern Gaza targeted with bombs, in apparent breach of truce|Maybe in the 27th time Israel will learn to not negotiate with terrorists Feels like they never learn |
| worldnews | Israel's finance minister defends settlement funds in budget row|These POS people need to be jailed.. we need to fight this cancer. So much damage is being done for years it's horrible... |
| worldnews | Israel's finance minister defends settlement funds in budget row|Israeli policy towards settlers couldnâ€™t be more inflammatory, antagonistic, and radicalizing for Palestinians who have to suffer them. |
| worldnews | Freed Israeli hostage describes deteriorating conditions while being held by Hamas|I hope after all the Palestinian terrorist prisoners are released IDF tracks them to their final destination, and either HIMARS or cluster bombs them. They just can't keep letting them go, it starts this shit all over again in the future. |
| worldnews | Freed Israeli hostage describes deteriorating conditions while being held by Hamas|My condition deteriorated as the IDF treated me like a one of nearly 6 million Palestinian hostages in occupied Bantustans, can you imagine? |
| worldnews | Freed Israeli hostage describes deteriorating conditions while being held by Hamas|Oh she was starving? It is almost like there Israel cut off the food and water in Gaza ðŸ¤¯ðŸ¤¯ |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Yeah, thumbs up shooting babies and civilians in their beds. Geezus, people wonder why most of the world doesnt want to get involved with this shitshow... |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Thatâ€™s the entire story right there. The â€œmoderatesâ€ are very much not moderate. The harsh truth is Israel got no partner for peace and will probably never have. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|If you harbor or celebrate terrorists , guess what you are? A terrorist. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|The picture of evil right here. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Absolute cockroaches |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Cowards Killing defenseless people in their sleep. very heroic you cockroaches |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Mmmmmmhmmm love all the foreign aid.... we should be sending ultimatums not money to these monstrous regimes. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Well, he won't be a minister for long at this rate. Shame on Europe for keeping sending money for terrorists. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|This is a man who has an actual degree in holocaust denial. He is about as antisemitic and evil as you can get, and the majority of Palestinians agree with his views. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|A terrorist piece of shit praised terrorism? Well I never! |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Putrid scum bags |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Iâ€™m going to say this comment might not help persuade the Israelis to stop flattening Gazaâ€¦. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Disgusting |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Just stop, you are stoking the fire. Its like you inviting IDF to come and shoot you. I mean that minister. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|"Partners in peace" my ass. This is why overbearing Israeli security and the occupation of the west bank exist folks. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Heroic if they had attacked an Israeli military base... terrorist scum. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|jesus fuck someone put a pillow over this guyâ€™s face |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Well then, there you have it! I don't see wht Israel should stop with Gaza now we know how the whole of Palestine feels. FREE PALESTINE (by making it all part of Israel). Enough of that barbarian culture and religion, it has no place in the modern world. |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Genocidal dreamers |
| worldnews | Palestinian Authority minister: Hamas's October 7 massacre of Israelis 'heroic'|Heroic how? The only thing Hamas achieved is giving Israel more excuses to take away Palestinians' rights. |
| worldnews | Israel allegedly strikes Syria's Damascus International Airport|The murderous and illegal Assad regime, and itâ€™s backer Putin, continue to bomb and kill civilians every day. Can we get some mass marching for them? |
| worldnews | Israel allegedly strikes Syria's Damascus International Airport|Defund israel |
| worldnews | Israel allegedly strikes Syria's Damascus International Airport|so when are people are going call israel the terrorists? only brown countries right? |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|Thatâ€™s a double edged sword. Look to plank in your own eye |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|Yea start with your own â€œsettlersâ€ pal |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|Can we also join hands globally against Apartheid? |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|Coming from an occupational military force defending terrorist settlers all while playing the victim. Terrorist is a political definition, civilians shouldn't be dying but at least try to understand why it's happening and whose fault it is that this conflict even started |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|1200 died from terrorists? How many thousands of kids died from stray bombs? Weâ€™re not stupid and not buying it anymore. |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|Countries need to join hands globally against the crimes committed by Israel. |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|Envoy of a terrorist state, long in conflict with international law. Rich |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|We tried sanctioning Russia, but it has yet to yield any tangible benefit. |
| worldnews | Countries need to join hands globally against terrorism, says Israel envoy|A lot already areâ€¦ GWOT has not yet ended |
| worldnews | Israeli-linked oil tanker seized off the coast of Aden, Yemen, private intelligence firm says|Oh. Shit. They should ask Saddam Hussein why itâ€™s stupid to mess with the oil. Oh waitâ€¦ |
| worldnews | Israeli-linked oil tanker seized off the coast of Aden, Yemen, private intelligence firm says|Oh, i am sure that the Israeli oil tankers have been oppressing Palestinian oil tankers for years. Free the Palestinian oil tankers! There is oil on your hands Jews, i mean Israelis. Please dont hurt me jihadis, I hate Jews too. |
| worldnews | Israeli-linked oil tanker seized off the coast of Aden, Yemen, private intelligence firm says|Itâ€™s like these people want some freedom or something Edit: hey fuckers by freedom I mean the kind f16â€™s and b-52s deliver |
| worldnews | Live Thread for 2023 Israel-Hamas Crisis (Thread 42)|"The pro-Hamas mob smashed the window of a New York kosher restaurant. Because, you know, terrorizing Jews in America will #FreePalestine."  |
| worldnews | Irish ambassador to Israel summoned for 'reprimand'|Isn't he using the bible phrase? |
| worldnews | Irish ambassador to Israel summoned for 'reprimand'|Christ the Israeli govt is absolutely fucking shameless. |
| worldnews | Irish ambassador to Israel summoned for 'reprimand'|That sub is so cancerous. |
| worldnews | Irish ambassador to Israel summoned for 'reprimand'|The Irish need to get off their high horse Diplomacy calls for it now |
| worldnews | Fatah official: Oct. 7 is part of our 'defensive war' against Israel, Hamas is â€˜part of our political and social fabricâ€™|" we like the terrorists." Palestine probably |
| worldnews | Netanyahu to Qatar: Israel will not assassinate Hamas leaders in country|Suddenly muh oil is more important than revenge. What a surprise. Lets not insult the country that still has slavery and harbors the very people who are behind the Oktober 7 attack. |
| worldnews | Netanyahu to Qatar: Israel will not assassinate Hamas leaders in country|Looks like we will be getting another â€œWrath of Godâ€ hit squad |
| worldnews | Netanyahu to Qatar: Israel will not assassinate Hamas leaders in country|Israel clearly does not want to destroy Hamas, but they alsohaveto do something about Oct 7. So Netanyahu is trying to kill as many Palestinians as he can so that he can sell the war as a victory to Israelis. |
| worldnews | Netanyahu to Qatar: Israel will not assassinate Hamas leaders in country|You know it means that it exactly what will happen. We all know Bibi's word doesn't count for much. |
| worldnews | Netanyahu to Qatar: Israel will not assassinate Hamas leaders in country|Ah yes, Netanyahu is reading the card in his pocket ala Homer. â€œYou kids DO need a babysitter!â€ â€œBlast that infernal card!â€ |
| worldnews | Israeli forces fire tear gas at West Bank crowds celebrating release of Palestinian prisoners|Idk WHY Israel would have to use teargas. Itâ€™s not like a mob in the West Bank would grab suspected Israeli spies that were their own people and kill them. Or publicly execute them without a trial. To cheers. Then film themselves hanging the bodies for all their kids to see. Only to have half the west ignore their deaths. Why are Israelis so â€œparanoid.â€ Smh |
| worldnews | Hamas frees second group of Israeli, Thai hostages in truce|Truce feels like the wrong word for it. It's more like terroristic extortion |
| worldnews | Irish troops unharmed as Unifil patrol hit by Israeli gunfire in southern Lebanon|Israelis in this comment section justifying this lmao Get fucked. |
| worldnews | Hamas is set to release 14 Israeli hostages for 42 Israel-held Palestinians in a second truce swap|And israelis are bad because they value life of israelis 3x more than life of palestines, right? |
| worldnews | Hamas is set to release 14 Israeli hostages for 42 Israel-held Palestinians in a second truce swap|Why are the numbers so lopsided? Why did Israel ever let the precedent of massive prisoner swaps for hostages start? Theyâ€™ve been emboldened to continue and are incentivized to take as many hostages as possible. |
| worldnews | Hamas is set to release 14 Israeli hostages for 42 Israel-held Palestinians in a second truce swap|This just seems like it makes it worthwhile for Israel to make terrorism and terroristic threats a death penalty offense. That way there's no Palestinian criminals to free. |
| worldnews | Israel-Hamas conflict has gone beyond war to â€˜terrorism,â€™ Pope Francis says|Ignorance> Adopted Bias> Hatred> Terrorism> War> Death> Hell. |
| worldnews | Israel's Communications Minister Threatens Haaretz, Suggests Penalizing Its Gaza War Coverage|Netanyahu's far-right coalition is by far the worst that Israelis could ever asked for... supporting settler terrorism and persecuting journalism. |
| worldnews | Israel's Communications Minister Threatens Haaretz, Suggests Penalizing Its Gaza War Coverage|Well, Bibi tried to force the judiciary to do his bidding, so it's certainly no surprise that he would threaten a newspaper that doesn't tow the line of his corrupt administration. |
| worldnews | Israel's Communications Minister Threatens Haaretz, Suggests Penalizing Its Gaza War Coverage|Honest question: how and when do Israelis take control of their own government? Bibi is driving Israel off a cliff and the world is salivating over it. |
| worldnews | Hamas hands over first group of Israeli hostages to Red Cross in Gaza Strip|This disgusting hamas filth is purposely splitting up released kidnapped families to further terrorize Jewish families in the process. Their next-level terrorism in this fake gesture of cooperation, was all planned ahead of time. More evidence of why Israel must erase hamas from the Earth. |
| worldnews | Cubaâ€™s President Leads Pro-Palestine March outside US Embassy in Havana|How about this guy releases the protesters he jailed after the July 11 protests? He pretends to care about human rights in Palestine but continues to treat his own people lile shit |
| worldnews | Gaza war to continue for at least two more months: Israel Defence Minister|Another cycle of hate and death incoming |
| worldnews | Gaza war to continue for at least two more months: Israel Defence Minister|Israel wonâ€™t stop until the Palestinian people are wiped out. |
| worldnews | Gaza war to continue for at least two more months: Israel Defence Minister|Screw all of them and their hate filled slaughter. Stop giving them the weapons to make it happen. |
| worldnews | South African Lawmakers Vote to Cut Diplomatic Ties With Israel|Damn, where is Israel gonna get advice from on how to ruin a national power grid now? |
| worldnews | South African Lawmakers Vote to Cut Diplomatic Ties With Israel|Failed state |
| worldnews | South African Lawmakers Vote to Cut Diplomatic Ties With Israel|Andâ€¦.the 3rd world countries are biting the hands the feed them. Thatâ€™sâ€¦.smart. |
| worldnews | South African Lawmakers Vote to Cut Diplomatic Ties With Israel|They probably donâ€™t want the world to know what the tyranny of the majority looks like. |
| worldnews | South African Lawmakers Vote to Cut Diplomatic Ties With Israel|Crazy how many states with a history of being colonised are taking issue Israelâ€™s actions against Palestinians. |




## Modeling
In this project I build a classifier to detect anti-Israeli and anti-semitic comments. I then combine the model with Reddit's API, `PRAW`, in order to search through recent comments and reveal them.  

The modeling procedure is depicted in the following figure. As can be seen in the above table, looking at comments alone can be misleading. I therefore take the title and the comment and combine them together using the following rule `f'{title} ; {comment}`. BERT based models can handle sequences of up to a length of `512` tokens. In some cases the combinations of title and a comment surpass this window. In these cases I look only at the first part of the comment. A future work could extand the treatment for long sequences by pooling predictions for different parts, or by any other method.  
![Modeling](https://github.com/DavidHarar/Reddit/blob/main/plots/modeling.png)
For LLM I used the [Zephyr-7b-alpha](https://huggingface.co/HuggingFaceH4/zephyr-7b-alpha). For classification I used [Roberta](https://huggingface.co/roberta-base). Label-spreading was done using the `[CLS]` token, using a `KNN` kernel. Voting ensemble was used between the LLM and the label spreading because neither of the method was good enough. After getting to the combined labeled data, I upscaled my data by asking the LLM to rephrase comments. I do it only once. The final version is of a fine-tuning using the labeled data, after I continue the pre-training, using the entire set of unlabeled data (it improves precision mostly on the right-most side of the predicted scores, in comparisson with the just-fine-tuned model). Fine-tuning was done by training the pre-trained model for 3 epochs on the labeled data.  

## Limitations and Further Work
I made accomadations on multiple occations to see the project through.
- Data: I used old Reddit's data using the Pushlift Data Dumps. Each subreddit includes two files, one for sumbissions and another for comments made for each sumbission, and for each comment. I didn't address comments to comments and basically trained a model using only comments made directly to the submission itself. 
- Model: As mentioned above, I didn't solve the issue of long strings. A further work would be able to solve it. 
- Labeled data: I manually labeled only 3k observations. In order to have a more robust data, one should label more examples. 


## Downvote and Legal
In Reddit there are two main social coins. One is `karma` and another is `awards`. The latter is basically diginal prizes given between redditors to express upreciation for meaningfull comments. Most of these awards cost money, and this project ignores them entirely. The other coin, `karma`, is basically the balance of upvotes and downvotes of the comments a redittor has made. Being downvoted for a hateful comment will inflict on the user's karma.  

Reddit API allows for downvote and upvote of comments and submissions directly form the API. Nevertheless, the usage of automated voting may be considered a violation of their policies, and hence **I do not recomend it, and any change to the provided code is on the modifier's responsibility**. For this reason, in this project I only reveal comments that are suspected of being antisemitic or anti-Israeli and take no action further than that.  
Regarding the use of Reddit'd Data in a machine learning model (see [3.2 Restrictions](https://www.redditinc.com/policies/data-api-terms?fbclid=IwAR3H0FWGTMVo1W0hJJhkBD31knspw36N5DvbO5RiBfz1bIl8lXk_tZLtKnE), Data API Terms), it is said that data that atchieved through Reddit's API won't be used to train ML models effective June 19,2023. The data used in this project was taken from [Reddit Pushlift](https://www.reddit.com/r/pushshift/), a community that aggregates Reddit's old data, from when it was perfectly legal to be used for training ML models. 


## How to get your Reddit API Key
In order to get such report, one has to have a Reddit API key. [This](https://www.reddit.com/wiki/api/) is a guide for how to get one. For convenience I summarize the steps below:
1. Read [Redditâ€™s Developer Terms](https://www.redditinc.com/policies/developer-terms) and [Data API Terms](https://www.redditinc.com/policies/data-api-terms). In section 4 it is specified that one should not use Reddit's data to train ML models. The restriciton is effective June 2023, while the data that was used to train the model is 10 years old. In the current project, no data is being collected nor being used for retraining the provided model.  
2. [Register](https://support.reddithelp.com/hc/en-us/requests/new?ticket_form_id=14868593862164). Here you have to specify your interest. 
3. Get your personal API key from [here](https://old.reddit.com/prefs/apps/).